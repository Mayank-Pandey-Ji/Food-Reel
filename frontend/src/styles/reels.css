/* =============================
   reels.css — ICON VISIBILITY FIX (final)
   - circle background on button
   - svg strokes use currentColor (forced)
   - stacked icon + count (centered)
   ============================= */

/* ---------- Main scroller ---------- */
.reels-container{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  overflow-y:auto;
  scroll-snap-type:y mandatory;
  -webkit-overflow-scrolling:touch;
  background: linear-gradient(180deg, var(--bg-grad-start), var(--bg-grad-end));
  padding-top:env(safe-area-inset-top);
  padding-bottom:env(safe-area-inset-bottom);
  scrollbar-width:none;
  -ms-overflow-style:none;
}
.reels-container::-webkit-scrollbar{display:none}

/* ---------- Each reel ---------- */
.reel-item{
  height:100vh;
  width:100%;
  scroll-snap-align:start;
  display:flex;
  align-items:center;
  justify-content:center;
  user-select:none;
  background:transparent;
}

/* ---------- Frame ---------- */
.frame{
  height:min(100vh, calc(100vw * 16 / 9));
  width:min(100vw, calc(100vh * 9 / 16));
  aspect-ratio:9/16;
  position:relative;
  margin:auto;
  border-radius:14px;
  overflow:hidden;
  background:#000;
  box-shadow:0 10px 30px rgba(0,0,0,0.4);
  border:1px solid rgba(255,255,255,0.05);
}

.frame .reel-video{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
}

/* subtle vignette */
.frame::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background: radial-gradient(60% 60% at 50% 40%, rgba(0,0,0,0) 35%, rgba(0,0,0,0.45) 82%);
  z-index:10;
}

/* ---------- Left overlay (caption / CTA) ---------- */
.reel-overlay{
  position:absolute;
  left:12px;
  bottom:14px;
  right:110px;
  display:flex;
  flex-direction:column;
  gap:8px;
  z-index:20;
  max-width:calc(100% - 140px);
}

.reel-desc{
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden;
  padding:8px 12px;
  border-radius:10px;
  background:rgba(0,0,0,0.5);
  color:white;
  font-size:14px;
  font-weight:600;
}

.reel-visit{
  padding:8px 12px;
  border-radius:8px;
  background:white;
  color:#000;
  font-weight:700;
  text-decoration:none;
  font-size:14px;
}

/* =======================================
   RIGHT ACTION BAR — stacked icon + count
   ======================================= */
.action-bar{
  position:absolute;
  right:12px;
  top:50%;
  transform:translateY(-50%);
  display:flex;
  flex-direction:column;
  gap:20px;
  align-items:center;
  z-index:22;
  pointer-events:auto;
}

/* BUTTON wrapper: stacks icon (svg) and count vertically */
.action-btn{
  display:flex;
  flex-direction:column;    /* svg above, count below */
  align-items:center;
  justify-content:center;
  gap:8px;                  /* spacing between icon and count */
  width:auto;
  background:transparent;
  border:none;
  padding:0;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;
}

/* Circular visual layer placed on the button (not svg) */
.action-btn .icon-circle{
  display:block;
  width:56px;
  height:56px;
  border-radius:50%;
  background:rgba(0,0,0,0.35);
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 6px 16px rgba(0,0,0,0.28);
}

/* Ensure the button controls icon color via currentColor */
.action-btn{
  color: #fff; /* currentColor used by SVG via stroke:currentColor */
}

/* SVG icon: no padding, use currentColor; force rules to override inline SVG attributes */
.action-btn svg,
.action-btn svg * {
  stroke: currentColor !important;
  fill: none !important;
  color: inherit !important;
  vector-effect: non-scaling-stroke;
}

/* set the visual size of the svg */
.action-btn svg{
  width:28px;
  height:28px;
  display:block;
}

/* If you have the svg inside the .icon-circle, recommended markup:
   <button class="action-btn"><span class="icon-circle"><svg>...</svg></span><div class="action-count">0</div></button>
   But this CSS also works if your svg sits directly inside the button. */

/* Count below the icon (centered) */
.action-count{
  margin:0;
  font-size:14px;
  font-weight:700;
  color:white;
  text-shadow:0 1px 2px rgba(0,0,0,0.6);
  text-align:center;
  line-height:1;
  pointer-events:none;
}

/* Liked state: fill svg children and tint the icon circle */
.action-btn.liked{
  color: #ff2d55; /* currentColor becomes pink for svg stroke/fill */
}
.action-btn.liked svg,
.action-btn.liked svg * {
  stroke: none !important;
  fill: currentColor !important;
}
.action-btn.liked .icon-circle{
  background: rgba(255,45,85,0.12);
}

/* mobile tweaks */
@media (max-width:520px){
  .action-bar{ gap:16px; }
  .action-btn svg{ width:26px; height:26px; }
  .action-btn .icon-circle{ width:50px; height:50px }
  .action-count{ font-size:13px; }
}

/* ---------- Bottom nav ---------- */
.bottom-nav{
  position:fixed;
  left:50%;
  transform:translateX(-50%);
  bottom:12px;
  z-index:30;
  display:flex;
  align-items:center;
  gap:24px;
  padding:8px 16px;
  border-radius:999px;
  background:rgba(0,0,0,0.35);
  backdrop-filter:blur(6px);
  color:white;
}

.bottom-nav a{
  color:white;
  text-decoration:none;
  display:flex;
  flex-direction:column;
  align-items:center;
  font-size:12px;
}
.bottom-nav svg{
  width:22px;
  height:22px;
  stroke:currentColor;
  margin-bottom:4px;
}

/* Accessibility focus outlines */
.action-btn:focus, .reel-visit:focus, .bottom-nav a:focus{
  outline: 2px solid rgba(255,255,255,0.12);
  outline-offset: 4px;
  border-radius:10px;
}

/* small-screen adjustments */
@media (max-width:420px){
  .frame{ border-radius:12px }
  .reel-overlay{ left:10px; right:84px; bottom:14px }
  .reel-desc{ font-size:13px; padding:8px 10px }
  .reel-visit{ font-size:14px; padding:9px 12px }
  .action-btn svg{ width:22px; height:22px }
  .action-btn .icon-circle{ width:48px; height:48px }
  .action-count{ font-size:12px }
}

/* ensure text color consistency */
.frame .reel-desc,
.frame .reel-userline,
.reel-audio,
.action-count { color: rgba(255,255,255,0.95) }
